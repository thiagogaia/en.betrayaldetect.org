<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CheatfinderPRO - Análise em Andamento</title>
    <script src="https://cdn.tailwindcss.com"></script>
<script
  src="https://cdn.utmify.com.br/scripts/utms/latest.js"
  data-utmify-prevent-xcod-sck
  data-utmify-prevent-subids
  async
  defer
></script>
    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '970676507858955');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=970676507858955&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->


    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        body {
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 10px;
        }

        .alert-header {
            background: #006B54;
            color: white;
            padding: 15px;
            width: 100%;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .alert-header .alert-icon {
            font-size: 24px;
        }

        .alert-header h1 {
            font-size: 18px;
            font-weight: 600;
        }

        .status-message {
            text-align: center;
            margin: 30px 0;
        }

        .status-message h2 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .status-message p {
            font-size: 16px;
            color: #666;
        }

        .video-container {
            background: white;
            border-radius: 15px;
            border: 2px solid #006B54;
            margin: 40px auto;
            overflow: hidden;
            max-width: 1200px;
            width: 100%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .video-container > div {
            position: relative;
            width: 100%;
            margin: 0 auto;
        }

        .video-container img, 
        .video-container #backdrop_6791dccb62df1d1092b79d18 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @media (max-width: 768px) {
            .video-container {
                width: 100%;
                margin: 25px auto;
            }
        }

        .profile-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }

        .profile-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #e0e0e0;
            overflow: hidden;
            margin: 0 auto 15px auto;
            border: 2px solid #075e54;
        }

        .profile-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-info {
            width: 100%;
        }

        .profile-info h2 {
            font-size: 18px;
            color: #075e54;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .profile-info p {
            color: #666;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .profile-info p i {
            color: #075e54;
            font-size: 16px;
        }

        .progress-section {
            margin: 30px 0;
        }

        .progress-title {
            text-align: center;
            color: #333;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #ddd;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .progress {
            width: 0%;
            height: 100%;
            background: #00E676;
            position: absolute;
            left: 0;
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            color: #666;
            font-size: 14px;
        }

        .status-section {
            background: #dcf8c6;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .status-header {
            color: #075e54;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-header .icon {
            font-size: 18px;
        }

        .status-message-item {
            color: #075e54;
            margin: 0px 0px 12px 0px;
            padding-left: 25px;
            position: relative;
            font-size: 15px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .status-message-item.active {
            opacity: 1;
            transform: translateY(0);
        }

        .status-message-item::before {
            content: '';
            position: absolute;
            left: 10px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }

        #preview-popup {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            text-align: center;
            z-index: 1000;
            width: 90%;
            max-width: 400px;
            display: none;
        }

        #preview-popup.show {
            display: block;
        }

        .preview-button {
            background: #006B54;
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            text-transform: uppercase;
        }

        .preview-button:hover {
            background: #005544;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 999;
        }

        .overlay.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="alert-header">
        <div class="alert-icon"></div>
        <h1>You have used your last free attempt. Stay on this page, otherwise it will not be possible to make further attempts.</h1>
    </div>

    <div class="container">
        <div class="status-message">
            <h2> Success! We have found the number. Please wait, we are generating the report with the recovered data.</h2>
            <p>Watch the video below in the meantime to better understand the system. </p>
        </div>

        <div class="video-container">
            <div id="vid_682d2567a3e4acaf12144272" style="position:relative;width:100%;padding: 56.60377358490566% 0 0;">
                <img id="thumb_682d2567a3e4acaf12144272" src="https://images.converteai.net/f766786c-387f-47fd-829e-9e4302d7a6f6/players/682d2567a3e4acaf12144272/thumbnail.jpg" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;display:block;">
                <div id="backdrop_682d2567a3e4acaf12144272" style="position:absolute;top:0;width:100%;height:100%;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);"></div>
            </div>
        </div>

        <div class="profile-section">
            <!-- Adicionado container para a foto do perfil -->
            <div class="profile-image">
                <img id="profilePhoto" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMTAwIiBmaWxsPSIjZTBlMGUwIi8+CiAgICA8Y2lyY2xlIGN4PSIxMDAiIGN5PSI4MCIgcj0iNDAiIGZpbGw9IiNhYWEiLz4KICAgIDxwYXRoIGQ9Ik0xODAgMTgwYzAtNDQtMzYtODAtODAtODBzLTgwIDM2LTgwIDgwIiBmaWxsPSIjYWFhIi8+Cjwvc3ZnPg==" alt="Profile Photo">
            </div>
            <div class="profile-info">
                <h2 id="phoneNumber"></h2>
                <p><i></i> <span id="location">Our system detected that the person you are tracking is frequently communicating with someone from: Loading location...</span></p>
            </div>
        </div>

        <div class="progress-section">
            <p class="progress-title">⏳ The full investigation may take up to 5 minutes...</p>
            <div class="progress-bar">
                <div class="progress"></div>
            </div>
            <div class="progress-labels">
                <span>0%</span>
                <span>100%</span>
            </div>
        </div>

        <div class="status-section">
            <h3 class="status-header">
                <span class="icon"></span>
                Status...
            </h3>
            <div id="statusContainer"></div>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div id="preview-popup">
        <h3>Complete Analysis!</h3>
        <p>All data has been successfully collected.</p>
        <button onclick="window.location.href='/ultra/step3'" class="preview-button">
            Access Full Report
        </button>
    </div>

    <script>
        // Status messages functionality
        const statusMessages = [
            "Accessing server information...",
            "Breaking WhatsApp encryption...",
            "Obtaining real-time location...",
            "Checking conversation history...",
            "Analyzing behavior patterns...",
            "Detecting suspicious activities...",
            "Processing message metadata...",
            "Checking recent connections...",
            "Analyzing activity timestamps...",
            "Mapping frequent contacts...",
            "Identifying common groups...",
            "Checking privacy settings...",
            "Processing media history...",
            "Analyzing typing patterns...",
            "Checking profile changes...",
            "Decoding encrypted messages...",
            "Analyzing old profile photos...",
            "Verifying suspicious connections...",
            "Processing geolocation data...",
            "Identifying nighttime activity patterns...",
            "Finalizing complete analysis..."
        ];

        const statusContainer = document.getElementById('statusContainer');
        let currentIndex = 0;
        let activeMessages = [];

        function createStatusMessage(text) {
            const div = document.createElement('div');
            div.className = 'status-message-item';
            div.textContent = text;
            return div;
        }

        function updateStatus() {
            const newMessage = createStatusMessage(statusMessages[currentIndex]);
            statusContainer.appendChild(newMessage);
            activeMessages.push(newMessage);

            setTimeout(() => {
                newMessage.classList.add('active');
            }, 50);

            if (activeMessages.length > 4) {
                const oldMessage = activeMessages.shift();
                oldMessage.style.opacity = '0';
                setTimeout(() => {
                    oldMessage.remove();
                }, 300);
            }

            currentIndex = (currentIndex + 1) % statusMessages.length;
        }

        // Initialize status messages
        for (let i = 0; i < 3; i++) {
            const message = createStatusMessage(statusMessages[i]);
            statusContainer.appendChild(message);
            activeMessages.push(message);
            message.classList.add('active');
            currentIndex = (currentIndex + 1) % statusMessages.length;
        }

        // Update status every 3 seconds
        setInterval(updateStatus, 3000);

        // Progress bar and popup functionality
        function showPopup() {
            const popup = document.getElementById('preview-popup');
            const overlay = document.getElementById('overlay');
            popup.style.removeProperty('transition');
            popup.style.removeProperty('bottom');
            popup.classList.add('show');
            overlay.classList.add('show');
        }

        function easeOutQuart(x) {
            return 1 - Math.pow(1 - x, 4);
        }

        function updateProgress() {
            const startTime = Date.now();
            const duration = 420000; // 7 minutes
            const progressBar = document.querySelector('.progress');
            const progressText = document.querySelector('.progress-labels span:first-child');
            let popupShown = false;

            function animate() {
                const currentTime = Date.now();
                const elapsed = currentTime - startTime;
                const rawProgress = Math.min(elapsed / duration, 1);
                const easedProgress = easeOutQuart(rawProgress);
                let progressPercentage;

                // Adjusted acceleration for first 50%
                if (rawProgress <= 0.4) {
                    progressPercentage = (rawProgress * 2.5) * 50;
                } else {
                    // After 50%, gradually decelerate
                    const remainingProgress = (easedProgress - 0.5) * 2;
                    progressPercentage = 50 + (remainingProgress * 50);
                }

                // Show popup when reaching 99%
                if (!popupShown && progressPercentage >= 99) {
                    progressPercentage = 99;
                    progressBar.style.width = '99%';
                    progressText.textContent = '99%';
                    showPopup();
                    popupShown = true;
                    return;
                }

                progressBar.style.width = progressPercentage + '%';
                progressText.textContent = Math.round(progressPercentage) + '%';

                if (rawProgress < 1 && !popupShown) {
                    requestAnimationFrame(animate);
                }
            }

            animate();
        }

        window.addEventListener('load', updateProgress);

        // Funço para buscar a foto do perfil com base no número de telefone
        async function fetchProfilePhoto(phoneNumber) {
            try {
                console.log('Buscando foto para o número:', phoneNumber);
                if (!phoneNumber) {
                    throw new Error('Nmero de telefone não disponível');
                }
                
                // Remover caracteres no numéricos do nmero de telefone
                const cleanNumber = phoneNumber.replace(/\D/g, '');
                
                // Construir a URL do endpoint com o número de telefone
                const endpoint = `https://primary-production-aac6.up.railway.app/webhook/ebe44a11-349f-42e2-b4fa-9f8c4ef3aa8c?tel=${cleanNumber}`;
                
                console.log('Fazendo requisição para:', endpoint);
                
                // Fazer a requisiço para o endpoint
                const response = await fetch(endpoint);
                
                if (!response.ok) {
                    throw new Error(`Erro na requisição: ${response.status}`);
                }
                
                // Verificar se a resposta contm uma imagem
                const contentType = response.headers.get('content-type');
                if (contentType && contentType.includes('image')) {
                    // Se for uma imagem, converter para blob e criar URL
                    const blob = await response.blob();
                    return URL.createObjectURL(blob);
                } else {
                    // Se for JSON, extrair a URL da imagem da propriedade "link"
                    const data = await response.json();
                    console.log('Resposta da API:', data);
                    
                    if (data && data.link) {
                        console.log('URL da imagem encontrada:', data.link);
                        return data.link;
                    } else {
                        console.error('Propriedade "link" no encontrada na resposta:', data);
                        throw new Error('Formato de resposta não reconhecido');
                    }
                }
            } catch (error) {
                console.error('Erro ao buscar foto do perfil:', error);
                return null; // Retorna null em caso de erro
            }
        }

        // Função para atualizar a foto do perfil na página
        async function updateProfilePhoto(photoUrl) {
            const profilePhotoElement = document.getElementById('profilePhoto');
            if (profilePhotoElement) {
                if (photoUrl) {
                    profilePhotoElement.src = photoUrl;
                    console.log('Foto do perfil atualizada com sucesso');
                } else {
                    console.log('Mantendo imagem padrão do perfil');
                }
            } else {
                console.error('Elemento da foto do perfil não encontrado');
            }
        }

        // Funço para formatar número de telefone com base no país/DDI
        function formatPhoneNumber(phoneNumber) {
            if (!phoneNumber) return '';
            
            // Remover caracteres não numéricos
            const cleanNumber = phoneNumber.replace(/\D/g, '');
            
            // Identificar o país com base no DDI
            // Brasil (+55): (XX) XXXXX-XXXX
            if (cleanNumber.startsWith('55') && cleanNumber.length >= 12) {
                const ddd = cleanNumber.substring(2, 4);
                const part1 = cleanNumber.substring(4, 9);
                const part2 = cleanNumber.substring(9);
                return `+55 (${ddd}) ${part1}-${part2}`;
            }
            
            // EUA/Canadá (+1): (XXX) XXX-XXXX
            else if (cleanNumber.startsWith('1') && cleanNumber.length >= 11) {
                const areaCode = cleanNumber.substring(1, 4);
                const part1 = cleanNumber.substring(4, 7);
                const part2 = cleanNumber.substring(7);
                return `+1 (${areaCode}) ${part1}-${part2}`;
            }
            
            // Portugal (+351): XXX XXX XXX
            else if (cleanNumber.startsWith('351') && cleanNumber.length >= 12) {
                const part1 = cleanNumber.substring(3, 6);
                const part2 = cleanNumber.substring(6, 9);
                const part3 = cleanNumber.substring(9);
                return `+351 ${part1} ${part2} ${part3}`;
            }
            
            // México (+52): (XX) XXXX XXXX
            else if (cleanNumber.startsWith('52') && cleanNumber.length >= 12) {
                const areaCode = cleanNumber.substring(2, 4);
                const part1 = cleanNumber.substring(4, 8);
                const part2 = cleanNumber.substring(8);
                return `+52 (${areaCode}) ${part1} ${part2}`;
            }
            
            // Espanha (+34): XXX XX XX XX
            else if (cleanNumber.startsWith('34') && cleanNumber.length >= 11) {
                const part1 = cleanNumber.substring(2, 5);
                const part2 = cleanNumber.substring(5, 7);
                const part3 = cleanNumber.substring(7, 9);
                const part4 = cleanNumber.substring(9);
                return `+34 ${part1} ${part2} ${part3} ${part4}`;
            }
            
            // Reino Unido (+44): XXXX XXXXXX
            else if (cleanNumber.startsWith('44') && cleanNumber.length >= 12) {
                const areaCode = cleanNumber.substring(2, 6);
                const part1 = cleanNumber.substring(6);
                return `+44 ${areaCode} ${part1}`;
            }
            
            // Alemanha (+49): XXX XXXXXXX
            else if (cleanNumber.startsWith('49') && cleanNumber.length >= 12) {
                const areaCode = cleanNumber.substring(2, 5);
                const part1 = cleanNumber.substring(5);
                return `+49 ${areaCode} ${part1}`;
            }
            
            // Frana (+33): X XX XX XX XX
            else if (cleanNumber.startsWith('33') && cleanNumber.length >= 11) {
                const part1 = cleanNumber.substring(2, 3);
                const part2 = cleanNumber.substring(3, 5);
                const part3 = cleanNumber.substring(5, 7);
                const part4 = cleanNumber.substring(7, 9);
                const part5 = cleanNumber.substring(9);
                return `+33 ${part1} ${part2} ${part3} ${part4} ${part5}`;
            }
            
            // Itália (+39): XXX XXXXXXX
            else if (cleanNumber.startsWith('39') && cleanNumber.length >= 11) {
                const part1 = cleanNumber.substring(2, 5);
                const part2 = cleanNumber.substring(5);
                return `+39 ${part1} ${part2}`;
            }
            
            // Argentina (+54): (XX) XXXX-XXXX
            else if (cleanNumber.startsWith('54') && cleanNumber.length >= 12) {
                const areaCode = cleanNumber.substring(2, 4);
                const part1 = cleanNumber.substring(4, 8);
                const part2 = cleanNumber.substring(8);
                return `+54 (${areaCode}) ${part1}-${part2}`;
            }
            
            // Chile (+56): (X) XXXX XXXX
            else if (cleanNumber.startsWith('56') && cleanNumber.length >= 11) {
                const areaCode = cleanNumber.substring(2, 3);
                const part1 = cleanNumber.substring(3, 7);
                const part2 = cleanNumber.substring(7);
                return `+56 (${areaCode}) ${part1} ${part2}`;
            }
            
            // Colômbia (+57): (XXX) XXX-XXXX
            else if (cleanNumber.startsWith('57') && cleanNumber.length >= 12) {
                const areaCode = cleanNumber.substring(2, 5);
                const part1 = cleanNumber.substring(5, 8);
                const part2 = cleanNumber.substring(8);
                return `+57 (${areaCode}) ${part1}-${part2}`;
            }
            
            // Índia (+91): XXXXX-XXXXX
            else if (cleanNumber.startsWith('91') && cleanNumber.length >= 12) {
                const part1 = cleanNumber.substring(2, 7);
                const part2 = cleanNumber.substring(7);
                return `+91 ${part1}-${part2}`;
            }
            
            // China (+86): XXX XXXX XXXX
            else if (cleanNumber.startsWith('86') && cleanNumber.length >= 13) {
                const part1 = cleanNumber.substring(2, 5);
                const part2 = cleanNumber.substring(5, 9);
                const part3 = cleanNumber.substring(9);
                return `+86 ${part1} ${part2} ${part3}`;
            }
            
            // Japo (+81): XX-XXXX-XXXX
            else if (cleanNumber.startsWith('81') && cleanNumber.length >= 12) {
                const part1 = cleanNumber.substring(2, 4);
                const part2 = cleanNumber.substring(4, 8);
                const part3 = cleanNumber.substring(8);
                return `+81 ${part1}-${part2}-${part3}`;
            }
            
            // Austrália (+61): XXX XXX XXX
            else if (cleanNumber.startsWith('61') && cleanNumber.length >= 11) {
                const part1 = cleanNumber.substring(2, 5);
                const part2 = cleanNumber.substring(5, 8);
                const part3 = cleanNumber.substring(8);
                return `+61 ${part1} ${part2} ${part3}`;
            }
            
            // Rssia (+7): (XXX) XXX-XX-XX
            else if (cleanNumber.startsWith('7') && cleanNumber.length >= 11) {
                const areaCode = cleanNumber.substring(1, 4);
                const part1 = cleanNumber.substring(4, 7);
                const part2 = cleanNumber.substring(7, 9);
                const part3 = cleanNumber.substring(9);
                return `+7 (${areaCode}) ${part1}-${part2}-${part3}`;
            }
            
            // Formato padrão para outros países: grupos de 3 ou 4 dgitos
            else {
                // Se o número comear com um dígito que parece ser um DDI
                if (cleanNumber.length > 7) {
                    // Tentar identificar o DDI (assumindo 1-3 dígitos)
                    let ddiLength = 1;
                    if (cleanNumber.charAt(0) === '1' || cleanNumber.charAt(0) === '7') {
                        ddiLength = 1;
                    } else if (/^[2-9]/.test(cleanNumber)) {
                        ddiLength = cleanNumber.charAt(0) === '2' ? 3 : 2;
                    }
                    
                    const ddi = cleanNumber.substring(0, ddiLength);
                    const restOfNumber = cleanNumber.substring(ddiLength);
                    
                    // Dividir o resto em grupos de 3 ou 4 dgitos
                    let formattedRest = '';
                    for (let i = 0; i < restOfNumber.length; i += 3) {
                        formattedRest += ' ' + restOfNumber.substring(i, Math.min(i + 3, restOfNumber.length));
                    }
                    
                    return `+${ddi}${formattedRest}`;
                }
                
                // Se no conseguir identificar o formato, retornar o número limpo
                return cleanNumber;
            }
        }

        // Initialization when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            const phoneNumber = localStorage.getItem('phoneNumber');
            if (phoneNumber) {
                // Aplicar máscara ao nmero de telefone
                const formattedNumber = formatPhoneNumber(phoneNumber);
                document.getElementById('phoneNumber').textContent = formattedNumber;
                
                // Buscar e exibir a foto do perfil
                const photoUrl = await fetchProfilePhoto(phoneNumber);
                await updateProfilePhoto(photoUrl);
            }
            
            // Iniciar a atualizaço da localizao
            updateLocation();
        });

        // Function to get location via IP using IPinfo
        async function getLocationFromIP() {
            try {
                console.log('Starting IP location search via IPinfo...');
                const response = await fetch('https://ipinfo.io/json?token=ded781dab652d2');
                
                if (!response.ok) {
                    throw new Error('Error in IPinfo API response');
                }
                
                const data = await response.json();
                console.log('Data received from IPinfo:', data);
                
                if (data.city && data.country) {
                    const location = `${data.city}, ${data.country}`;
                    console.log('Location successfully obtained:', location);
                    return location;
                } else {
                    throw new Error('Incomplete location data');
                }
            } catch (error) {
                console.error('Error getting location:', error);
                throw error;
            }
        }

        // Function to update location on page with retry
        async function updateLocation(retryCount = 0) {
            try {
                console.log(`Attempt ${retryCount + 1} to get location...`);
                const location = await getLocationFromIP();
                console.log('Location obtained:', location);
                
                const locationElement = document.getElementById('location');
                if (locationElement) {
                    locationElement.textContent = `Our system detected that the person you are tracking is frequently communicating with someone from: ${location}`;
                    console.log('Location updated in element');
                } else {
                    console.error('Location element not found');
                }
            } catch (error) {
                console.error('Error updating location:', error);
                
                // Try again up to 3 times
                if (retryCount < 2) {
                    console.log('Trying again in 2 seconds...');
                    setTimeout(() => updateLocation(retryCount + 1), 2000);
                } else {
                    const locationElement = document.getElementById('location');
                    if (locationElement) {
                        locationElement.textContent = 'Our system detected that the person you are tracking is frequently communicating with someone from: Location not available';
                    }
                }
            }
        }
    </script>

    <!-- VSL Script -->
    <script type="text/javascript" id="scr_682d2567a3e4acaf12144272">var s=document.createElement("script");s.src="https://scripts.converteai.net/f766786c-387f-47fd-829e-9e4302d7a6f6/players/682d2567a3e4acaf12144272/player.js",s.async=!0,document.head.appendChild(s);</script>
<script>
  // Redirect URL
  const redirectURL = "https://misterdetect.com/ultra/step3";

  // Detect back button
  history.pushState(null, null, location.href);
  window.onpopstate = function () {
    location.href = redirectURL;
  };

  // Detect attempt to leave or close tab gesture on mobile (iOS and Android)
  let triggered = false;

  function redirectIfNotYet() {
    if (!triggered) {
      triggered = true;
      window.location.href = redirectURL;
    }
  }
</script>
</body>
</html>
